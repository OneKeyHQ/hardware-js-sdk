"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[354],{91354:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(28742),o=r(75608),i=r(5767),s=r(99195),u=r(88979);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c=a(n),d=a(i),l=a(s),f=a(u),h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)};function p(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function u(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))}function v(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(a){u=[6,a],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}"function"===typeof SuppressedError&&SuppressedError;var y,g={exports:{}},m="object"===typeof Reflect?Reflect:null,w=m&&"function"===typeof m.apply?m.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};y=m&&"function"===typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var E=Number.isNaN||function(e){return e!==e};function b(){b.init.call(this)}g.exports=b,g.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}N(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&N(e,"error",t,r)}(e,o,{once:!0})}))},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var _=10;function L(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function R(e){return void 0===e._maxListeners?b.defaultMaxListeners:e._maxListeners}function C(e,t,r,n){var o,i,s,u;if(L(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"===typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=R(e))>0&&s.length>o&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,u=a,console&&console.warn&&console.warn(u)}return e}function O(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=O.bind(n);return o.listener=r,n.wrapFn=o,o}function S(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"===typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):x(o,o.length)}function I(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function x(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function N(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(e){if("number"!==typeof e||e<0||E(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_=e}}),b.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||E(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},b.prototype.getMaxListeners=function(){return R(this)},b.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var u=o[e];if(void 0===u)return!1;if("function"===typeof u)w(u,this,t);else{var a=u.length,c=x(u,a);for(r=0;r<a;++r)w(c[r],this,t)}return!0},b.prototype.addListener=function(e,t){return C(this,e,t,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(e,t){return C(this,e,t,!0)},b.prototype.once=function(e,t){return L(t),this.on(e,T(this,e,t)),this},b.prototype.prependOnceListener=function(e,t){return L(t),this.prependListener(e,T(this,e,t)),this},b.prototype.removeListener=function(e,t){var r,n,o,i,s;if(L(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},b.prototype.listeners=function(e){return S(this,e,!0)},b.prototype.rawListeners=function(e){return S(this,e,!1)},b.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):I.call(e,t)},b.prototype.listenerCount=I,b.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]};var k,j=new g.exports,M=n.getLogger(n.LoggerNames.HdCommonConnectSdk),P=n.parseConnectSettings(),D=0,A={};function H(e){var t=e.event;if(k)switch(t!==n.LOG_EVENT&&M.debug("hd-common-connect-sdk handleMessage",e),t){case n.UI_EVENT:j.emit(e.event,e),j.emit(e.type,e.payload);break;case n.LOG_EVENT:case n.FIRMWARE_EVENT:j.emit(e.event,e);break;case n.DEVICE_EVENT:[n.DEVICE.CONNECT,n.DEVICE.DISCONNECT,n.DEVICE.FEATURES,n.DEVICE.SUPPORT_FEATURES].includes(e.type)&&j.emit(e.type,e.payload);break;default:M.log("No need to be captured message",e.event)}}function q(e,t){return void 0===t&&(t=!0),p(this,void 0,void 0,(function(){return v(this,(function(r){switch(r.label){case 0:if(!k)throw o.ERRORS.TypedError("postMessage: _core not found");return t?(D++,A[D]=o.createDeferred(),[4,k.handleMessage(h(h({},e),{id:"".concat(D)}))]):[3,2];case 1:return[2,r.sent()];case 2:return k.handleMessage(e),[2]}}))}))}var F=c.default({eventEmitter:j,init:function(e,t,r){return p(void 0,void 0,void 0,(function(){var t,o,i;return v(this,(function(s){switch(s.label){case 0:P=h(h(h({},P),e),{env:null!==(i=e.env)&&void 0!==i?i:"node"}),n.enableLog(!!e.debug),M.debug("init"),s.label=1;case 1:switch(s.trys.push([1,3,,4]),console.log(P.env),t=void 0,P.env){case"webusb":t=l.default;break;case"lowlevel":t=f.default;break;default:t=d.default}return[4,n.initCore(P,t,r)];case 2:return null===(k=s.sent())||void 0===k||k.on(n.CORE_EVENT,H),n.setLoggerPostMessage(H),[2,!0];case 3:return o=s.sent(),M.error(n.createErrorMessage(o)),[2,!1];case 4:return[2]}}))}))},call:function(e){return p(void 0,void 0,void 0,(function(){var t,r;return v(this,(function(i){switch(i.label){case 0:M.debug("call: ",e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,q({event:n.IFRAME.CALL,type:n.IFRAME.CALL,payload:e})];case 2:return(t=i.sent())?(M.debug("response: ",t),[2,t]):[2,n.createErrorMessage(o.ERRORS.TypedError(o.HardwareErrorCode.CallMethodNotResponse))];case 3:return r=i.sent(),M.error("__call error: ",r),[2,n.createErrorMessage(r)];case 4:return[2]}}))}))},cancel:function(e){void 0!==k&&k.handleMessage({event:n.IFRAME.CANCEL,type:n.IFRAME.CANCEL,payload:{connectId:e}})},dispose:function(){j.removeAllListeners(),P=n.parseConnectSettings()},uiResponse:function(e){if(!k)throw o.ERRORS.TypedError(o.HardwareErrorCode.NotInitialized);var t=e.type,r=e.payload;k.handleMessage({event:n.UI_EVENT,type:t,payload:r})},updateSettings:function(){return Promise.resolve(!0)}});t.default=F,t.messagePromises=A},5767:(e,t,r)=>{var n=r(30496),o=r(75608),i=r(12538);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(n),a=s(i);function c(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function u(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))}function d(e){return"string"===typeof e?"text/plain":"application/json"}function l(e){try{const t=JSON.parse(e);if("object"!==typeof t)throw new Error("Invalid response");return t}catch(t){return e}}function f(e){var t;return c(this,void 0,void 0,(function*(){const r={url:e.url,method:e.method,data:(n=e.body,"string"===typeof n?n:JSON.stringify(n)),withCredentials:!1,headers:{"Content-Type":d(null==e.body?"":e.body)},timeout:null!==(t=e.timeout)&&void 0!==t?t:void 0,transformResponse:e=>e};var n;const i=yield a.default.request(r);if(200===+i.status)return l(i.data);const s=l(i.data);throw"object"===typeof s&&null!=s&&null!=s.error?new o.HardwareError({errorCode:o.HardwareErrorCode.NetworkError,message:s.error}):new o.HardwareError({errorCode:o.HardwareErrorCode.NetworkError,message:i.data})}))}"function"===typeof SuppressedError&&SuppressedError,a.default.interceptors.request.use((e=>{var t,r;return"undefined"!==typeof window||(null===(t=e.url)||void 0===t?void 0:t.startsWith("http://localhost:21320"))&&((null===(r=null===e||void 0===e?void 0:e.headers)||void 0===r?void 0:r.Origin)||(console.log("set node request origin"),e.headers=Object.assign(Object.assign({},e.headers),{Origin:"https://jssdk.onekey.so"}))),e}));const{check:h,buildOne:p,receiveOne:v,parseConfigure:y}=u.default;e.exports=class{constructor(e){this.configured=!1,this.stopped=!1,this.url=null==e?"http://localhost:21320":e}_post(e){return this.stopped?Promise.reject(o.ERRORS.TypedError("Transport stopped.")):f(Object.assign(Object.assign({},e),{method:"POST",url:this.url+e.url}))}init(e){return c(this,void 0,void 0,(function*(){this.Log=e;return yield this._silentInit()}))}_silentInit(){return c(this,void 0,void 0,(function*(){const e=yield f({url:this.url,method:"POST",timeout:3e3});return h.info(e).version}))}configure(e){const t=y(e);this.configured=!0,this._messages=t}listen(e){return c(this,void 0,void 0,(function*(){if(null===e)throw o.ERRORS.TypedError("Http-Transport does not support listen without previous.");const t=yield this._post({url:"/listen",body:e});return h.devices(t)}))}enumerate(){return c(this,void 0,void 0,(function*(){const e=yield this._post({url:"/enumerate"});return h.devices(e)}))}_acquireMixed(e){const t=null==e.previous?"null":e.previous,r=`/acquire/${e.path}/${t}`;return this._post({url:r})}acquire(e){return c(this,void 0,void 0,(function*(){const t=yield this._acquireMixed(e);return h.acquire(t)}))}release(e,t){return c(this,void 0,void 0,(function*(){const r=this._post({url:`/release/${e}`});t||(yield r)}))}call(e,t,r){return c(this,void 0,void 0,(function*(){if(null==this._messages)throw o.ERRORS.TypedError(o.HardwareErrorCode.TransportNotConfigured);const i=this._messages;n.LogBlockCommand.has(t)?this.Log.debug("call-"," name: ",t):this.Log.debug("call-"," name: ",t," data: ",r);const s=p(i,t,r).toString("hex"),u=yield this._post({url:`/call/${e}`,body:s,timeout:"Initialize"===t?1e4:void 0});if("string"!==typeof u)throw o.ERRORS.TypedError(o.HardwareErrorCode.NetworkError,"Returning data is not string.");const a=v(i,u);return h.call(a)}))}post(e,t,r){return c(this,void 0,void 0,(function*(){if(null==this._messages)throw o.ERRORS.TypedError(o.HardwareErrorCode.TransportNotConfigured);const n=this._messages,i=p(n,t,r).toString("hex");yield this._post({url:`/post/${e}`,body:i})}))}read(e){return c(this,void 0,void 0,(function*(){if(null==this._messages)throw o.ERRORS.TypedError(o.HardwareErrorCode.TransportNotConfigured);const t=this._messages,r=yield this._post({url:`/read/${e}`});if("string"!==typeof r)throw o.ERRORS.TypedError(o.HardwareErrorCode.NetworkError,"Returning data is not string.");const n=v(t,r);return h.call(n)}))}requestDevice(){return Promise.reject()}stop(){this.stopped=!0}cancel(){this.Log.debug("canceled")}}},88979:(e,t,r)=>{var n=r(75608),o=r(30496);function i(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=i(o);function u(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function u(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;const{check:a,buildBuffers:c,receiveOne:d,parseConfigure:l}=s.default;e.exports=class{constructor(){this.configured=!1,this.plugin={}}init(e,t,r){this.Log=e,this.emitter=t,this.plugin=r,this.plugin.init()}configure(e){const t=l(e);this.configured=!0,this._messages=t}listen(){}enumerate(){return this.plugin.enumerate()}acquire(e){var t;return u(this,void 0,void 0,(function*(){try{return yield this.plugin.connect(e.uuid),{uuid:e.uuid}}catch(r){throw this.Log.debug("lowlelvel transport connect error: ",r),n.ERRORS.TypedError(n.HardwareErrorCode.LowlevelTrasnportConnectError,null!==(t=r.message)&&void 0!==t?t:r)}}))}release(e){return u(this,void 0,void 0,(function*(){try{return yield this.plugin.disconnect(e),!0}catch(t){return this.Log.debug("lowlelvel transport disconnect error: ",t),!1}}))}call(e,t,r){return u(this,void 0,void 0,(function*(){if(null===this._messages||!this._messages)throw n.ERRORS.TypedError(n.HardwareErrorCode.TransportNotConfigured);const i=this._messages;o.LogBlockCommand.has(t)?this.Log.debug("lowlevel-transport","call-"," name: ",t):this.Log.debug("lowlevel-transport","call-"," name: ",t," data: ",r);const s=c(i,t,r);for(const t of s){const r=t.toString("hex");this.Log.debug("send hex strting: ",r);try{yield this.plugin.send(e,r)}catch(u){throw this.Log.debug("lowlevel transport send error: ",u),n.ERRORS.TypedError(n.HardwareErrorCode.BleWriteCharacteristicError,u.reason)}}try{const e=yield this.plugin.receive();if("string"!==typeof e)throw new Error("Returning data is not string");this.Log.debug("receive data: ",e);const t=d(i,e);return a.call(t)}catch(u){throw this.Log.error("lowlevel call error: ",u),u}}))}cancel(){this.Log.debug("lowlevel-transport","cancel")}}},99195:(e,t,r)=>{var n=r(30496),o=r(75608),i=r(50453);function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=s(n),a=s(i);function c(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function u(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;const{parseConfigure:d,buildEncodeBuffers:l,decodeProtocol:f,receiveOne:h,check:p}=u.default,v=[{vendorId:4617,productId:21440},{vendorId:4617,productId:21441}];e.exports=class{constructor(){this.stopped=!1,this.configured=!1,this._lastDevices=[],this.configurationId=1,this.endpointId=1,this.interfaceId=0}init(e){this.Log=e;const{usb:t}=navigator;if(!t)throw o.ERRORS.TypedError(o.HardwareErrorCode.RuntimeError,"WebUSB is not supported by current browsers");this.usb=t}configure(e){const t=d(e);this.configured=!0,this._messages=t}enumerate(){return c(this,void 0,void 0,(function*(){return yield this._getDeviceList()}))}_getDeviceList(){return c(this,void 0,void 0,(function*(){if(!this.usb)return[];const e=(yield this.usb.getDevices()).filter((e=>{const t=v.some((t=>e.vendorId===t.vendorId&&e.productId===t.productId)),r="string"===typeof e.serialNumber&&e.serialNumber.length>0;return t&&r}));return this._lastDevices=e.map((e=>({path:e.serialNumber,device:e}))),this._lastDevices}))}acquire(e){var t;return c(this,void 0,void 0,(function*(){if(e.path)try{return yield this.connect(null!==(t=e.path)&&void 0!==t?t:"",!0),yield Promise.resolve(e.path)}catch(r){throw this.Log.debug("acquire error: ",r),r}}))}_findDevice(e){const t=this._lastDevices.find((t=>t.path===e));if(null==t)throw new Error("Action was interrupted.");return t.device}connect(e,t){return c(this,void 0,void 0,(function*(){for(let n=0;n<5;n++){n>0&&(yield new Promise((e=>setTimeout((()=>e(void 0)),200*n))));try{return yield this._connectIn(e,t)}catch(r){if(4===n)throw r}}}))}_connectIn(e,t){return c(this,void 0,void 0,(function*(){const r=yield this._findDevice(e);if(yield r.open(),t){yield r.selectConfiguration(this.configurationId);try{yield r.reset()}catch(n){}}yield r.claimInterface(this.interfaceId)}))}call(e,t,r){return c(this,void 0,void 0,(function*(){if(null==this._messages)throw o.ERRORS.TypedError(o.HardwareErrorCode.TransportNotConfigured);const i=yield this._findDevice(e);if(!i)throw o.ERRORS.TypedError(o.HardwareErrorCode.DeviceNotFound);const s=this._messages;n.LogBlockCommand.has(t)?this.Log.debug("call-"," name: ",t):this.Log.debug("call-"," name: ",t," data: ",r);const u=l(s,t,r);for(const t of u){const r=new Uint8Array(64);r[0]=63,r.set(new Uint8Array(t),1),i.opened||(yield this.connect(e,!1)),yield i.transferOut(this.endpointId,r)}const a=yield this._receive(e);if("string"!==typeof a)throw o.ERRORS.TypedError(o.HardwareErrorCode.NetworkError,"Returning data is not string.");const c=h(s,a);return p.call(c)}))}_receive(e){var t;return c(this,void 0,void 0,(function*(){const r=yield this._findDevice(e);r.opened||(yield this.connect(e,!1));const n=yield r.transferIn(this.endpointId,64),o=null===(t=n.data)||void 0===t?void 0:t.buffer.slice(1),{length:i,typeId:s,restBuffer:u}=f.decodeChunked(o),c=Number(i+6),d=new a.default(c);for(d.writeUint16(s),d.writeUint32(i),i&&d.append(u);d.offset<c;){const e=yield r.transferIn(this.endpointId,64);if(!e.data)throw new Error("no data");0===e.data.byteLength&&console.warn("empty data");const t=e.data.buffer.slice(1);c-d.offset>=64?d.append(t):d.append(t.slice(0,c-d.offset))}d.reset();const l=d.toBuffer();return Buffer.from(l).toString("hex")}))}release(e){return c(this,void 0,void 0,(function*(){const t=yield this._findDevice(e);yield t.releaseInterface(this.interfaceId),yield t.close()}))}requestDevice(){return c(this,void 0,void 0,(function*(){if(this.usb)try{return yield this.usb.requestDevice({filters:v})}catch(e){this.Log.debug("requestDevice error: ",e)}}))}}}}]);